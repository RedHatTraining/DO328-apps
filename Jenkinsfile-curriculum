pipeline {
    agent {
        label 'master'
    }

    stages {

        stage("Install") {

            agent {
                docker {
                    image 'node:14'
                }
            }

            environment {
                // Override HOME to WORKSPACE
                HOME = "${WORKSPACE}"
                // or override default cache directory (~/.npm)
                NPM_CONFIG_CACHE = "${WORKSPACE}/.npm"
            }

            steps {
                echo "Branch is ${env.BRANCH_NAME}..."
                dir("adopt-a-pup/web-app") {
                    sh 'npm ci'
                }
            }
        }

    }
}
